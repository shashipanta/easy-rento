<aside th:fragment="admin-sidebar"
       class="w-64 bg-gray-800 text-white p-6 space-y-6 overflow-y-auto">
    <div class="text-2xl font-bold text-center border-b border-gray-600 pb-4 mb-4">
        <!--            <span th:text="${project.name}">EasyRento</span>-->
    </div>

    <!-- User Info -->
    <div class="text-sm text-gray-300 text-center border-b border-gray-600 pb-4 mb-4">
        Logged in as<br/>
        <span class="font-semibold text-white" th:text="${#authentication.name}">admin@example.com</span>
    </div>

    <nav class="space-y-1 text-sm font-medium">
        <a href="/admin/dashboard"

           class="flex items-center px-4 py-2 rounded hover:bg-gray-700 transition nav-link">
            <i data-lucide="layout-dashboard" class="w-4 h-4 mr-2"></i>
            Dashboard
        </a>

        <div th:if="${#authorization.expression('hasRole(''ROLE_SUPER_ADMIN'')')}">
            <a href="/admin/users"

               class="flex items-center px-4 py-2 rounded hover:bg-gray-700 transition nav-link">
                <i data-lucide="users" class="w-4 h-4 mr-2"></i>
                Manage Users
            </a>
            <a href="/admin/roles"

               class="flex items-center px-4 py-2 rounded hover:bg-gray-700 transition nav-link">
                <i data-lucide="shield-check" class="w-4 h-4 mr-2"></i>
                Manage Roles
            </a>
            <a href="/admin/policies"
               class="flex items-center px-4 py-2 rounded hover:bg-gray-700 transition nav-link">
                <i data-lucide="lock" class="w-4 h-4 mr-2"></i>
                Manage Policies
            </a>
        </div>

        <form th:action="@{/admin/logout}" method="post" class="mt-6">
            <button type="submit"
                    class="flex items-center w-full px-4 py-2 rounded hover:bg-red-600 transition text-left">
                <i data-lucide="log-out" class="w-4 h-4 mr-2"></i>
                Logout
            </button>
        </form>
    </nav>

    <script>
        <!-- Highlight current link -->
        document.addEventListener("DOMContentLoaded", function () {
            const currentPath = window.location.pathname;

            console.log("Current path ", currentPath);

            // Highlight matching link
            document.querySelectorAll(".nav-link").forEach(link => {
                console.log("Link : ", link)
                if (link.getAttribute("href") === currentPath ||
                    currentPath.startsWith(link.getAttribute("href"))) {
                    link.classList.add("bg-gray-700", "text-white");
                    console.log("found")
                }
            });
        });
    </script>
</aside>



