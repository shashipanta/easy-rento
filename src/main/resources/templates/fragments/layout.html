<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:x-bind="http://www.w3.org/1999/xhtml">
<head th:replace="fragments/head :: head('Admin Dashboard')">
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-gray-50 text-gray-900 font-sans">

<!-- Navbar -->
<div th:replace="fragments/nav :: navbar"></div>

<!-- Main Content -->
<div class="max-w-7xl mx-auto p-6" th:fragment="content">
    <!-- Page-specific content will be inserted here -->
</div>

<!-- Toast Notification Component -->
<div
        x-data="{ show: false, type: 'success', message: '' }"
        x-show="show"
        x-transition
        x-init="$watch('show', value => value && setTimeout(() => show = false, 3000))"
        x-bind:class="{
        'bg-green-100 border-green-500 text-green-800': type === 'success',
        'bg-red-100 border-red-500 text-red-800': type === 'error'
    }"
        class="fixed bottom-6 right-6 px-5 py-3 rounded shadow-lg border-l-4 text-sm"
        style="display: none;"
        x-ref="toast"
>
    <p x-text="message"></p>
</div>

<!-- Alpine Toast Trigger Script -->
<script>
    function showToast(type, message) {
        const toast = document.querySelector('[x-ref="toast"]');
        if (!toast) return;

        const component = Alpine.closest(toast);
        component.__x.$data.type = type;
        component.__x.$data.message = message;
        component.__x.$data.show = true;
    }
</script>

<!-- Spring / Thymeleaf Flash Message Support -->
<script th:inline="javascript">
    /*<![CDATA[*/
    [[${successMessage} != null ? 'showToast("success", "' + ${successMessage} + '");' : '']]
    [[${errorMessage} != null ? 'showToast("error", "' + ${errorMessage} + '");' : '']]
    /*]]>*/
</script>

</body>
</html>
